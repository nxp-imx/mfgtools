****************************************
RELEASE_STMFGTOOL_1.6.0.001
****************************************
08/5/2009

	- Initial release of UTP_UPDATE Operation.

****************************************
RELEASE_STMFGTOOL_1.5.0.054
****************************************
06/10/2009

	- Remove SCSI_STOP from end of operations. Just do the wait for 3.5 seconds to make sure all is flushed.
	  SCSI_STOP made the system drag until the finished device is removed from the bus.
	  
	  Libs/DevSupport/HidDevice.cpp
  	  Apps\StMfgTool.exe\docs\changelog.txt

****************************************
RELEASE_STMFGTOOL_1.5.0.053a
****************************************
06/01/2009

	- Fix for program crash when loading updater.sb to HID device. Only copy as much data left in file
	  to transfer buffer. Program was trying to load 64 bytes every transfer even when less data remained
	  in the file.
	  
	  Libs/DevSupport/HidDevice.cpp
  	  Apps\StMfgTool.exe\docs\changelog.txt

****************************************
RELEASE_STMFGTOOL_1.5.0.053
****************************************
06/01/2009

	- Fix for Mfg tool updates intermittently hang (SNYFLX-307, SDK-6075). Add asynchronous EraseLogicalMedia. 
	  Requires firmware change that implements new vendor-specific command (0x08). Backward compatible with all
	  previous firmware.
	  
	  Apps\StMfgTool.exe\OpUpdater.cpp
	  Apps\StMfgTool.exe\OpUpdater.h
	  Apps\StMfgTool.exe\version.h
  	  Apps\StMfgTool.exe\docs\changelog.txt
  	  Libs\DevSupport\StApi.h

****************************************
RELEASE_STMFGTOOL_1.5.0.052
****************************************
04/28/2009

	- Fix for First time manufacturing tool firmware update always fails when the firmware image size on the player 
	  is smaller than the new firmware (SDK-5570). Add EraseLogicalDrive commands for each system drive before 
	  writing to any drives.
	- Fix for writing Janus header to Settings Drive. Bug in the UpdaterConfigurationDialog mistakenly set the 
	  JanusInit operation flag for all HiddenDataDrives.
	  
	  Apps\StMfgTool.exe\OpUpdater.cpp
	  Apps\StMfgTool.exe\OpUpdaterDlg.cpp
	  Apps\StMfgTool.exe\version.h
  	  Apps\StMfgTool.exe\docs\changelog.txt

****************************************
RELEASE_STMFGTOOL_1.5.0.051B
****************************************
04/16/2009

	- Rebuild OtpAccess.lib and relink to fix program crash during OTP operation.

****************************************
RELEASE_STMFGTOOL_1.5.0.051
****************************************
03/30/2009

	- Display the version of the application in the main window.
	  
	  Apps\StMfgTool.exe\StDialogBar.cpp

****************************************
RELEASE_STMFGTOOL_1.5.0.050
****************************************
02/27/2009

	- move SCSIOP_START_STOP_UNIT to after ALL operations are complete. This fixes the problem
	  where the COPY_OP would fail after an UPDATE_OP because the device was stopped.
	  
	  Apps\StMfgTool.exe\OpCopy.cpp
	  Apps\StMfgTool.exe\OpUpdater.cpp
	  Apps\StMfgTool.exe\PortMgrDlg.cpp
	  Apps\StMfgTool.exe\version.h
  	  Apps\StMfgTool.exe\docs\changelog.txt
	  Libs\DevSupport\DeviceManager.cpp

****************************************
RELEASE_STMFGTOOL_1.5.0.049
****************************************
02/20/2009

	- display USB Path for Invalid device to update log string.
	  Apps\StMfgTool.exe\OpUpdater.cpp

****************************************
RELEASE_STMFGTOOL_1.5.0.048
****************************************
02/17/2009

	- Get and display firmware version for LOCKED profile updates.

****************************************
RELEASE_STMFGTOOL_1.5.0.047
****************************************
01/27/2009
	- Added SCSI_START_STOP_UNIT to operation completion to flush device cache.  Removes
		arbitrary 3.5 second delay before posting successful completion status.
	- Added LBA-Boot tag to DriveEditDlg.
	

****************************************
RELEASE_STMFGTOOL_1.5.0.046
****************************************
12/3/2008
	- Removed artificial delay after volume arrival notification; JanusInit timeout resolved by f/w.
	- Updated several Simplified Chinese strings with translations from English
	
****************************************
RELEASE_STMFGTOOL_1.5.0.045
****************************************
11/25/2008

	- Removed second read-back-verify during CompleteUpdate().

****************************************
RELEASE_STMFGTOOL_1.5.0.044
****************************************
11/17/2008

	- Fix PBS initialization problem. Was 0-ing the BS_VolLab in the PBS_FAT union instead of the PBS_FAT32
	union which nullified the rather important fields below.
		BPB_FSVer;          // uint16_t - 0
        BPB_RootClus;       // uint32_t - 2 The first cluster of the root directory. 
        BPB_FSInfo;         // uint16_t - 1 Sector number of FSINFO structure (PBS2) in the reserved area of the FAT32 volume.
        BPB_BkBootSec;      // uint16_t - 0 If non-zero, indicates the sector number in the reserved area of the volume of a copy of the boot record.
	
	  Temp implementation for testing only!

****************************************
RELEASE_STMFGTOOL_1.5.0.043
****************************************
11/13/2008

	- Add verify all writes to NAND after booting from NAND before JAnusInit and StoreInit.
	  If difference, dump read data to ReadData.bin and write data to WriteData.bin and FAIL Update operation.
	  
	  Temp implementation for testing only!

****************************************
RELEASE_STMFGTOOL_1.5.0.042
****************************************
11/12/2008

	- Check error code for EraseMedia to make sure we didn't lose any bad block markings.

****************************************
RELEASE_STMFGTOOL_1.5.0.041
****************************************
10/30/2008

	- Fix for loading a settings file from profile folder for a locked profile.
	- Add two seconds to delay following UPDATER_MODE enumeration.

****************************************
RELEASE_STMFGTOOL_1.5.0.040
****************************************
10/15/2008

	- Corrected resource ID of updater.sb built into locked profile.
	- Added #ifdefs arounnd drive array component additions for pre-defined drives in locked profile.

****************************************
RELEASE_STMFGTOOL_1.5.0.039
****************************************
09/18/2008

	- Changed downloading to get sector size for each drive.  This supports NANDs with multiple sector sizes.
	- Added back in locked profile firmware resources and inclusion of updater_res.h in profile source.

****************************************
RELEASE_STMFGTOOL_1.5.0.038
****************************************
09/04/2008 SP

	- Changed registry entry heading to Freescale from SigmaTel.  Requires users to reset StMfgTool options.
	- Added COM port status messaging as an option under the General tab. ( Ported from 1.5.1.033 )
	- Fix removal of file item from file op; file was still being listed in op details after editing op.
	- Disable Delete option in CopyOp if no files specified.
	- Added 3.5 second delay before posting completion status due to need to be sure device has flushed it's internal cache prior to disconnect.
	- Increased maximum USB ports to 16.

****************************************
RELEASE_STMFGTOOL_1.5.0.037
****************************************
08/20/2008 SP

	- Force firmware image into drive number zero

****************************************
RELEASE_STMFGTOOL_1.5.0.036
****************************************
08/15/2008 SP

	- Now uses common About bitmap splash screen with Freescale logo from WinSupport


****************************************
RELEASE_STMFGTOOL_1.5.0.035
****************************************
08/08/2008 SP

	- Fix up old profiles that have updater.sb or stmfgmsc.sb in the drive array
	- Changed About to bitmap splash screen with Freescale logo
	- Replaced Sigmatel icon with non-company specific icon

****************************************
RELEASE_STMFGTOOL_1.5.0.034
****************************************
07/24/2008 SP

	- Added abilty to do standalone COPY operation without an UPDATE

****************************************
RELEASE_STMFGTOOL_1.5.0.033
****************************************
06/23/2008 SP

	- Fix for registry entry count checking with warning message

****************************************
RELEASE_STMFGTOOL_1.5.0.032
****************************************
06/20/2008 SP

	- Registry entry count checking with warning message
	- Fixed registry scrubbing
	- Fixed not reporting correct serial number in log file for vid+pid 066F_37FF

****************************************
RELEASE_STMFGTOOL_1.5.0.031
****************************************
5/18/2008 SP

	- Fixed "New" profile operation
	- Enabaled Windows CE firmware support
		(User must select WinCE in UPDATE operation options)
	- Created example Windows CE profile

****************************************
RELEASE_STMFGTOOL_1.5.0.030
****************************************
5/18/2008 CLW

	- Corrected field shift to work with multiple registers.
	  WriteCustomerOtpField() ReadCustomerOtpField()
	  Apps\StMfgTool.exe\OpOTP.cpp

****************************************
RELEASE_STMFGTOOL_1.5.0.029
****************************************
5/16/2008 SP/CLW

	- Corrected a couple of minor operation list issues
	- Added OTP operation
	- Changed company name in copyright to Freescale 
	- Link otpaccess library

****************************************
RELEASE_STMFGTOOL_1.5.0.028
****************************************
5/12/2008 CW

	- Extended timeout for tthe JANUS_INIT command to SCSI_EXTENDED_TIMEOUT
	  Libs\DevSupport\StApi.h

****************************************
RELEASE_STMFGTOOL_1.5.0.027
****************************************
4/29/2008 SP

	- Changed data drive formatting to use the same command as updater to get sector count

****************************************
RELEASE_STMFGTOOL_1.5.0.026
****************************************
4/21/2008 SP

	- Tuned mutex algorithim for better distribution
	- Fixes for two exceptions where the hub or device were no longer present
	- Fixed application exception formatting error message on failed update

****************************************
RELEASE_STMFGTOOL_1.5.0.025
****************************************
4/2/2008 SP

	- Fixed MSC mode reset to recovery

****************************************
RELEASE_STMFGTOOL_1.5.0.024
****************************************
4/1/2008 SP

	- Improvements to Stop functionality, better error/success counting
	- Tested with up to 6 devices on two hubs

*******************************
RELEASE_STMFGTOOL_1.5.0.023
*******************************
3/31/2008 - CLW
	
	- Rename LoadDevice to LoadHidDevice()
	- Add LoadRecoveryDevice()
	  Apps\StMfgTool.exe\OpLoader.cpp, OpLoader.h

	- Add some calls to gSetupApi().IsDevNodeOk() when getting device properties. 
	  Haven't been able to see this fail even though gSetupApi().apiSetupDiGetDeviceRegistryProperty() does.
	- Move if Parent() == NULL return false higher in a couple of property.get() functions 
	  because they were spewing TRACE messages in recursive calls. I think it will be ok for 
	  the USB properties that were changed. May not be a global solution.
	  Libs\DevSupport\Device.cpp

	- Change parameters for CreateFile
	  Libs\DevSupport\HidDevice.cpp

	- Add code for asynchronous write - not used.
	  Libs\DevSupport\RecoveryDevice.cpp, RecoveryDevice.h

	- Add CM_Get_DevNode_Status(), IsDevNodeOk(), CR_GetErrorString(), and CM_GetProblemString().
	  Libs\DevSupport\SetupApi.cpp, SetupApi.h

	- Change CreateFile params.
	  Libs\DevSupport\UsbController.cpp
	  Libs\DevSupport\UsbHub.cpp

	- Check for empty driver name in FindDevice().
	  Libs\DevSupport\UsbPort.cpp

	- Return NULL in AddUsbDevice() if we can't get the Device Description for the registry.
	- Prevents the volume bounce issue in some test cases because OpUpdater doesn't get 
	  notified of a "bad" volume arrival.
	  Libs\DevSupport\VolumeDeviceClass.cpp

3/21/08 - SP

	- Request MUTEX on error completions; requires user to reset the device after errors
	- Display f/w version in dialog bar 
	- Added HID update strings to .rc (need translations)

*******************************
RELEASE_STMFGTOOL_1.5.0.xxx
*******************************
3/19/08 - CLW
	
	- Fix for error at end of update before Janus Init on MTP device.
	- Allow OP_UPDATE_INCOMPLETE as non-error in PerformMscDeviceUpdate()
	  Apps\StMfgTool.exe\OpUpdater.cpp


*******************************
RELEASE_STMFGTOOL_1.5.0.019
*******************************
3/19/08 - CLW

	- Remove NO_RESET_FOR_MSC_INIT_STORE. Never reset device for MSC only firmware to do InitStore.
	  Apps\StMfgTool.exe\DefaultProfile.h

	- Lock physical drive for entire update operation.
	- Causes Windows drive re-enumeration, so ready to copy after update on MSC-only builds.
	- HandleError on UpdateMscDevice() error.  
	- Remove NO_RESET_FOR_MSC_INIT_STORE. Never reset device for MSC only firmware to do InitStore.
	- Replace InitStore command for MTP devices at the end of update.
	  Apps\StMfgTool.exe\OpUpdater.cpp
	  
	- Fix for reported app crash on non-English OSes.
	- IDS_OPLOADER_XXX strings copied to non-english resources.
	  Apps\StMfgTool.exe\StMfgTool.rc

	- Add GetDeviceType().
	  Libs\DevSupport\DeviceClass.h
	  
	- Add diskNumber property for Physical disk number.
	  Libs\DevSupport\Volume.h
	  Libs\DevSupport\Volume.cpp
	  
	- Don't process MSC device class for USB dev arr/removal. Should be handled by VOL arr/removal.
	  Libs\DevSupport\DeviceManager.cpp
	  	
*******************************
RELEASE_STMFGTOOL_1.5.0.018
*******************************
3/18/08 - CLW

	- Add NO_RESET_FOR_MSC_INIT_STORE and SERIALIZE_HID macros.
	  Apps\StMfgTool.exe\DefaultProfile.h
	  Apps\StMfgTool.exe\OpUpdater.cpp
	  
	- Comment out HID serialization since it is handled at a higher level in OpUpdater.cpp
	  Libs\DevSupport\HidDevice.cpp

*******************************
RELEASE_STMFGTOOL_1.5.0.017
*******************************
3/13/08 - SP

	- Unregister DeviceManager callback in PortMgrDlg destructor.  Was a source of exceptions after opening the Configuration dialog and then starting.

3/12/08 - SP

	- Changed PC Ids (Phillips only) to TCHARs.  Possible fix to exception on Start seen in MfgTool built by customer.
	- Additional STOP fix.

*******************************
RELEASE_STMFGTOOL_1.5.0.016
*******************************
3/11/08 - CLW
	- Use GetLogicalDriveInfo90 to determine size of data drive for formatting.
		Apps/StMfGTool.exe/OpUpdater.cpp
	
3/11/08 - SP
	- Merged changes to always perform Reset2Updater and DataStoreInit for protocol 6 whether DRM firmware or not
	- Use profile pointer to SaveProfile()
	- Another STOP fix

*******************************
RELEASE_STMFGTOOL_1.5.0.015
*******************************
3/10/08 - CLW
	- Not merged to main\latest
	- Changes to always perform Reset2Updater and DataStoreInit for protocol 6 whether DRM firmware or not
	
*******************************
RELEASE_STMFGTOOL_1.5.0.014
*******************************
3/7/08 -SP
	- Another STOP fix
	- Preserve active profile class pointer after config dialog
	- Update status after completion when "stopped"

3/7/08 - CLW
	- Add include path for resource compiler.		
		Apps/StMfGTool.exe/StMfgTool.vcproj
	
	- Add copy operation to default profile
		Apps/StMfGTool.exe/ConfigPlayerProfilePage.cpp
		Apps/StMfGTool.exe/DefaultProfile.h
	
	- Fixes application crash when a hub is removed.
	- Don't unregister the callback in SetUsbPort(). Callback will automatically be 
	  unregistered by the return value of OnDeviceChangeNotify().
		Apps/StMfGTool.exe/PortMgrDlg.cpp
	
	- Key off of media::DriveFlag_ImageDataRsc instead of profile->locked to determine where to look for the file.
		Apps/StMfGTool.exe/OpUpdater.cpp
	
	- Don't allow copies of the Janus drive.
		Apps/StMfGTool.exe/OpUpdateDlg.cpp

	- Change media::DriveTag_Hidden to media::DriveTag_Janus.
		Apps/StMfGTool.exe/DriveEditDlg.cpp
	
	- Remove DriveTag_Hidden and DriveTag_Hidden2 because they are duplicates of 
	  DriveTag_DataJanus and DriveTag_DataSettings.
	- Add DriveFlag_ImageDataRsc.
		Libs/DevSupport/StMedia.h
	
	- Shorten macro to clear a resource compiler warning.
		Libs/DevSupport/StVersionInfo.h
		
*******************************
RELEASE_STMFGTOOL_1.5.0.013
*******************************
3/3/08 - SP

	- Fix profile save.  Extraneous empty operation section was being added each time profile is saved casuing confusion to profile APIs.
	- Enable drive edit filename based on drive tag.
	- Add drive image flag for hidden2 tag if filename given.
	- Enable edit mode for drive edit filename, and check filename on OK.
	- Remove associated file when changing drive tag to tag not associated with files (data, hidden).
	- Correct Hidden2 drive tag display (was 0x1B, now 0x0C).

3/3/08 - CLW

	- Solves intermitent application crash caused when UsbPort has a non-Null pointer to a deleted object. 
	  Querying the USB hardware after a DEVICE_REMOVAL message from the system did not guarantee that the USB port
          would be disconnected. Clear the port on DEVICE_REMOVAL and RefreshPort() on DEVICE_ARRIVAL.
	- Solves application crash when trying to initialize a firmware object with a file less than 1024 bytes. 
          Add checks to use the smaller of filesize or 1024.
	- Use AddRef() and Release() to increment/decrement the m_num_enabled_ports variable.
	- ASSERT if CreateMonitor() fails.
	- Add DeviceClass::ClearPort() to just clear the port instead of refresh it. Called from RemoveUsbDevice().

	Files changed:
		Apps/StMfGTool.exe/ConfigUsbPortPage.cpp
		Apps/StMfGTool.exe/PortMgrDlg.cpp
		Apps/StMfGTool.exe/version.h
		Libs/DevSupport/DeviceClass.cpp
		Libs/DevSupport/DeviceClass.h
		Libs/DevSupport/StFwComponent.cpp
		Libs/DevSupport/UsbHub.cpp
		Libs/DevSupport/UsbHub.h
		Libs/DevSupport/UsbPort.cpp
		Libs/DevSupport/UsbPort.h
		Libs/DevSupport/VolumeDeviceClass.cpp

*******************************
RELEASE_STMFGTOOL_1.5.0.011
*******************************
2/26/08 - SP

	- Release HID mutex on device removal to allow device enumeration outside the mutex protection
	- Check for STOP event while attempting to get HID mutex
	- Exception fix


*******************************
RELEASE_STMFGTOOL_1.5.0.010
*******************************
2/22/08 - SP

	- Fixed USB port selection retention
	- Release HID mutex if held on STOP event
	- Fixed several exceptions related to device removals
	

*******************************
RELEASE_STMFGTOOL_1.5.0.009
*******************************
2/19/08 - SP

	- Fixed device id search
	- Serialized device reset during a HID download to workaround a ROM issue

*******************************
RELEASE_STMFGTOOL_1.5.0.008
*******************************
2/6/08 - SP

	- Fixed UPDATE operation dialog drive deletion, boot f/w changes, and Open File dialog.

*******************************
RELEASE_STMFGTOOL_1.5.0.007
*******************************
2/5/08 - SP

	- Fix USB port selection
	- Added new translations for CHS and KO

*******************************
RELEASE_STMFGTOOL_1.5.0.006
*******************************
1/30/08 - SP

	- Fix cancellation of new operation
	- Fix delete of existing operation


*******************************
RELEASE_STMFGTOOL_1.5.0.005
*******************************
1/25/08 - SP

	- Fix for changing number of active USB ports
	- Fix for trap entering USB port dialog page for the second time
	- Fix for timeout of EraseLogicalMedia for large NANDs


*******************************
RELEASE_STMFGTOOL_1.5.0.003
*******************************
1/18/2008 - CLW

	- Make all StFwComponent constructors look at the lockedProfile flag.
	- Add OtpInit.sb firmware to bound resources.
	- Moved firmware resources to res directory.
	- Added InitOtpRegs() to OpUpdater after finding a HID device before calling RecoverDevice().

	Files changed:
		Apps/StMfGTool.exe/StMfgTool.rc
		Apps/StMfGTool.exe/resource.h
		Apps/StMfGTool.exe/OpUpdater.cpp
		Apps/StMfGTool.exe/OpUpdater.h
		Libs/DevSupport/StFwComponent.cpp

*******************************
RELEASE_STMFGTOOL_1.5.0.001
*******************************
	- Unregister for callbacks when changing ports. 

*******************************
RELEASE_STMFGTOOL_1.4.4.014
*******************************
	- Change Additional Memory to Reserve to Requested Drive Size (KB).

Files changed:
Mp3Host\msc_updater_development\mscdevlib\StConfigInfo.h
Mp3Host\msc_updater_development\mscdevlib\StConfigInfo.cpp  (*** LOGIC CHANGES ***) 
Mp3Host\msc_updater_development\mscdevlib\StSystemDrive.cpp (*** LOGIC CHANGES ***)
Mp3Host\msc_updater_development\stmfgtool\resource.h
Mp3Host\msc_updater_development\stmfgtool\StMfgTool.cpp
Mp3Host\msc_updater_development\stmfgtool\StMfgTool.rc
Mp3Host\msc_updater_development\stmfgtool\OpInfo.cpp
Mp3Host\msc_updater_development\stmfgtool\version.h
Mp3Host\msc_updater_development\stmfgtool\ConfigOpEditorDlg.cpp
Mp3Host\msc_updater_development\stmfgtool\ConfigCustomAdvDlg.cpp
Mp3Host\msc_updater_development\stmfgtool\ConfigCustomAdvDlg.h
Mp3Host\customer\SigmaTel Manufacturing Tool\readme.txt
Mp3Host\customer\SigmaTel Manufacturing Tool\changelog.txt

*******************************
RELEASE_STMFGTOOL_1.4.4.013 (SKIPPED)
*******************************

*******************************
RELEASE_STMFGTOOL_1.4.4.012
*******************************
- Increase SCSI command timout value to accomodate long apis.

Files changed:
Mp3Host\msc_updater_development\mscdevlib\StddiApi.h

*******************************
RELEASE_STMFGTOOL_1.4.4.011
*******************************
- Call EraseLogiclaMedia if EraseLogicalDrive(bootmanager) fails in OldResetToRecovery().
- Initialize allocation table so we have drive numbers before trying to call EraseLogicalDrive(bootmanager).

Files changed:
Mp3Host\msc_updater_development\mscdevlib\stusbmscdev.cpp
Mp3Host\msc_updater_development\stmfgtool\version.h
Mp3Host\customer\SigmaTel Manufacturing Tool\readme.txt

*******************************
RELEASE_STMFGTOOL_1.4.4.010
*******************************
- Remove ResetToUpdater functionality. - Always start from Recovery-mode!
- Don't Erase the NAND twice. Call EraseLogicalMedia, but don't call EraseLogicalDrive for each drive.
- Only write the system/settings drive sectors needed to accomodate the file, not the whole allocation.
- Supports writing files as binary data to non-Janus HiddenDataDrives.

Files changed:
Mp3Host\customer\SigmaTel Manufacturing Tool\changelog.txt
Mp3Host\customer\SigmaTel Manufacturing Tool\readme.txt
Mp3Host\msc_updater_development\mscdevlib\StConfigInfo.cpp
Mp3Host\msc_updater_development\mscdevlib\StddiApi.cpp
Mp3Host\msc_updater_development\mscdevlib\StddiApi.h
Mp3Host\msc_updater_development\mscdevlib\stscsi_9x.cpp
Mp3Host\msc_updater_development\mscdevlib\stsystemdrive.cpp
Mp3Host\msc_updater_development\mscdevlib\stusbmscdev.cpp
Mp3Host\msc_updater_development\stmfgtool\PortMgrDlg.cpp
Mp3Host\msc_updater_development\stmfgtool\PortMgrDlg.h
Mp3Host\msc_updater_development\stmfgtool\Operation.cpp
Mp3Host\msc_updater_development\stmfgtool\OpUpdater.cpp
Mp3Host\msc_updater_development\stmfgtool\OpUpdater.h
Mp3Host\msc_updater_development\stmfgtool\version.h

*******************************
RELEASE_STMFGTOOL_1.4.4.009
*******************************
Add ResetToUpdater functionality.
Don't "format" anything but the Janus drive.

Files changed:
Mp3Host\customer\SigmaTel Manufacturing Tool\readme.txt
Mp3Host\msc_updater_development\mscdevlib\mtpextensions.h
Mp3Host\msc_updater_development\mscdevlib\stddiapi.cpp
Mp3Host\msc_updater_development\mscdevlib\stddiapi.h
Mp3Host\msc_updater_development\mscdevlib\stmtpdevice.cpp
Mp3Host\msc_updater_development\mscdevlib\stmtpdevice.h
Mp3Host\msc_updater_development\mscdevlib\stupdater.cpp
Mp3Host\msc_updater_development\mscdevlib\stupdater.h
Mp3Host\msc_updater_development\mscdevlib\stusbmscdev.cpp
Mp3Host\msc_updater_development\mscdevlib\stusbmscdev.h
Mp3Host\msc_updater_development\stmfgtool\Operation.cpp
Mp3Host\msc_updater_development\stmfgtool\OpUpdater.cpp
Mp3Host\msc_updater_development\stmfgtool\OpUpdater.h
Mp3Host\msc_updater_development\stmfgtool\PortMgrDlg.h
Mp3Host\msc_updater_development\stmfgtool\version.h

*******************************
RELEASE_STMFGTOOL_1.4.4.008
*******************************
Cluster count calculations better optimized for larger NANDs

Files changed:
Mp3Host\msc_updater_development\mscdevlib\stsdisk.cpp

*******************************
RELEASE_STMFGTOOL_1.4.4.007
*******************************
Fix a problem related to sdk 2.6xx because of limited vendor command support

Files changed:
Mp3Host\msc_updater_development\mscdevlib\stusbmscdev.cpp

*******************************
RELEASE_STMFGTOOL_1.4.4.006
*******************************
Do not close MTP device after discovery and before reset
Do not serialize MTP reset/recovery
Disabled Exit button while running operation
Kill operation monitor threads at exit
Disabled numerous debug messages from USBPort.cpp
Added /TestLoop cmd line option to allow auto testing
Added success/failure count to port dlg if /TestLoop
Removed unneccessary version retieval from download procedure
Added recovery retry on failure

*******************************
RELEASE_STMFGTOOL_1.4.4.005
*******************************
fix a problem with non-static id update operation of the mfgtool

*******************************
RELEASE_STMFGTOOL_1.4.4.004
*******************************
change installer guid
update profiles to include sdk 2.612 + pcn27

*******************************
RELEASE_STMFGTOOL_1.4.4.003
*******************************
Update profiles to include sdk 2.620

*******************************
RELEASE_STMFGTOOL_1.4.4.002
*******************************
Updated the profiles to add some more new cases

*******************************
RELEASE_STMFGTOOL_1.4.4.001
*******************************
Customer requested feature to allow automatic recovery of normally enumerated devices (forced recovery).  Feature added for both MSC and MTP devices.

*******************************
RELEASE_STMFGTOOL_1.4.3.013
*******************************
Increase max number of drives that can be used

*******************************
RELEASE_STMFGTOOL_1.4.3.012
*******************************
Added drive arrays to support sdk 2.612 and sdk 3.120
Change the logic so that the firmware files are correctly listed in step 3 of the UPDATE edit window
 
*******************************
RELEASE_STMFGTOOL_1.4.3.000
*******************************
some more FAT32 changes
updated profiles and user manual

*******************************
RELEASE_STMFGTOOL_1.4.2.000
*******************************
Dual resource.bin support
FAT32 support

*******************************
RELEASE_STMFGTOOL_1.4.1.000
*******************************
Removed directory element "SDK Example PLayer".
Added directory element "SDK Firmware Updater".
Added Janus and data store initialization.

*******************************
RELEASE_STMFGTOOL_1.4.0.000
*******************************
sdk4.xx

*******************************
RELEASE_STMFGTOOL_1.3.10.006
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0022
	*******************************
	
	1/23/2006
	- Changes to support SDK2.610 removing 512 byte sector writes for certain
		ROM revisions.  This requires that this manufacturing application
		will not be able to work with SDK2.6 firmware.

*******************************
RELEASE_STMFGTOOL_1.3.101.000
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0019
	*******************************
	10/12/2005
	- Merged double-data drive, multiple static-id file, and new recovery mode driver.
    
*******************************
RELEASE_STMFGTOOL_1.3.10.005
*******************************
    9/19/2005
    - Changing minor version number to 10 to prevent confusiong with version 01.
    
*******************************
RELEASE_STMFGTOOL_1.3.1.005
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0016
	*******************************
	9/16/2005
	- Merged changes resulting from work with customer programming
	  devices on 8 ports simultaneously.
	- Added thread protection during accesses to USB ports.
	- Cleaned up several memory leaks.

*******************************
RELEASE_STMFGTOOL_1.3.1.004_DEV_DOUBLE_DATA_DRIVES 
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0014
	*******************************
	9/12/2005
	- Merged Chris' fixes for dangling handles and memory leaks.

*******************************
RELEASE_STMFGTOOL_1.3.1.003_DEV_DOUBLE_DATA_DRIVES 
*******************************
	9/02/2005
	- Fixed volume labelling.

*******************************
RELEASE_STMFGTOOL_1.3.1.002_DEV_DOUBLE_DATA_DRIVES 
*******************************
	9/01/2005
	- Form static-id firmware file names automatically.

*******************************
RELEASE_STMFGTOOL_1.3.1.001_DEV_DOUBLE_DATA_DRIVES 
*******************************
	8/30/2005
	- Added support loading multiple static-id firmware files.
	  File MUST be present for this version.

*******************************
RELEASE_STMFGTOOL_1.3.1.000_DEV_DOUBLE_DATA_DRIVES
*******************************
	8/26/2005
	- Added support for multiple data drives.

*******************************
RELEASE_STMFGTOOL_1.3.1.000
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0015
	*******************************
	8/30/2005
	- Added support for SDK3.1.  Write512() is no longer supported so the application
	  has to determine if the SDK version is 2.6 before calling Write512().
	- Changed SDK3.050 profile to SDK3.100.

*******************************
RELEASE_STMFGTOOL_1.3.05.004
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0013
	*******************************
	8/19/2005
	- No longer gets allocation table from device in CStUsbMscDev::Initialize(wstring).
	This call is an artifact of the updater application that checks the allocation table
	to see if it has to do a full or quick download.  This is not necessary for the manufacturing
	application as it always performs a full download.  This call would periodically fail
	on a 3502 with SDK2.521 causing an extended download time.

*******************************
RELEASE_STMFGTOOL_1.3.05.003
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0012
	*******************************
	7/12/2005
	- Reads ROM and Part IDs correctly to support LBMLC.

*******************************
RELEASE_STMFGTOOL_1.3.05.002
*******************************
	6/28/2005
	- Updated SDK3.050 binaries to build 41 to be compatible with
	  FAT16 changes.

*******************************
RELEASE_STMFGTOOL_1.3.05.001
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0011
	*******************************
	6/27/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0011

	- Merged FAT16 fixes from 1.611.0.139 updater.

*******************************
RELEASE_STMFGTOOL_1.3.05.000
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0010
	*******************************
	6/24/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0010

	- Removed SDK3.0 profiles.
	- Added SDK3.050 profile to MSCN player.

*******************************
RELEASE_STMFGTOOL_1.3.01.000
*******************************
	6/22/2005
	- Updated SDK2.6 profile binaries.

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0009
	*******************************
	5/17/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0009

	- Merged SDK2.6 LBMLC updater changes.

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0008
	*******************************
	5/16/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0008

	- Added capability to edit the media drive array via a GUI interface. It will
	  provide Manufacturing support for “Copy Protect” and other non-standard drive 
	  array hosts. It will also allow customers to rename their firmware files to 
	  non-standard names.

*******************************
RELEASE_STMFGTOOL_1.3.0.001
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0007
	*******************************
	4/19/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0007

	- Fixed problem when not using Static-ID firmware where hostlink.sb
	  was being loaded instead of updater.sb.
	- Failed Copy ops now added to event log.

*******************************
RELEASE_STMFGTOOL_1.3.0.000
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0006
	*******************************
	4/4/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0006

	- Added event logging.

*******************************
RELEASE_STMFGTOOL_1.3.0.139
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0005
	*******************************
	3/29/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0006

	- Merged Fareed MTP changes on br_localized_main_0000_dev_0010 (RELEASE_1.604.0.139)
	- "Merged changes made to updater application in order to support firmware 
	   download on Janus device."
	- "Everyone must use 1.604.0.139, the latest version of host software to 
	   work with latest MTP firmware version 3.090.122 and above. We may stop 
	   using 1.602.1.139 from now on."
	- Moved profile MTP firmware to version 3.090.122.

	
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0004
	*******************************
	3/25/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0005
	
	- Improved robustness of operation editor by forcing user to
	  copy the necessary files into the target directory or 'Cancel'.
	  Gives user feedback by coloring file names.
	- Moved 'Use static-id firmware' option to operation editor. The value
	  is now written to the .ini file.
	- File names persist in profile operations list.
	- Editing operations now only available in 'Edit' mode.
	- Enable auto-play rejection selection persists between runs.
	
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0003
	*******************************
	3/10/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0003
	
	- Merged MTP Updater algorithm from br_localized_main_0000/LATEST (mtp main)  
	- MTP as well as MSC updates are both working
	- Got rid of 3410 update operations in example profiles
	- Added 3500 MTP update operations in example profiles

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0002
	*******************************
	3/9/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0002
	
	- Integrate Clearcase support into VS 
	- Begin GUI development for dynamic updater files support

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0001
	*******************************
	2/16/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0001
	
	- Make the UPDATER Operation use the new dynamic firmware file list
      to perform updates.

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.3.0.139_MAIN_DEV_0000
	*******************************
	2/14/2005
	branch merged: br_localized_mfg_tool_1.3.0.139_main_dev_0000
	
	- Make OpInfo get the names and descriptions of the firmware files
      from the player.ini file instead of from product.h

*******************************
RELEASE_STMFGTOOL_1.2.0.139
*******************************
	*******************************
	INTEGRATION VIEW CHANGES
	*******************************
	1/06/2005 - CW
	- Changed the UseStaticID option default from TRUE to FALSE.

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0014
	*******************************
	1/05/2005
	branch merged: br_localized_mfg_tool_1.548.0.139_main_dev_0014
	
	- Added code to get the static-ID firmware from the UPDATE Operation folder
      instead of the root directory of the installed application.
    - Changed the name of the static-ID firmware image from mfgmsc3x.sb to stmfgmsc.sb
    - Took the mfgmsc3x.sb files out of source control
    - Changed the installer to not install the mfgmsc3x.sb files
	- Added a stmfgmsc.sb file to each of the example players' 3500 update operation folder
    - Updated the example player update operation files to SDK 2.521-based instead of SDK 2.511-based

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0012
	*******************************
	12/13/2004
	branch merged: br_localized_mfg_tool_1.548.0.139_main_dev_0012
	
	- Added OpCopy Directory code

*******************************
RELEASE_STMFGTOOL_1.1.8.139
*******************************
	*******************************
	BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0008
	*******************************
	9/20/2004
	branch merged: br_localized_mfg_tool_1.548.0.139_main_dev_0008
	
	- Fixed problem when in edit mode on player profile and hit the system exit button the 
	  Profile dialog would get flaky the next time it was run. Problem was I had too many 
	  control variables and UpdateData was getting called and control variables were uninitialized.
    - While messing with the profile configuration manager, were getting deleted before they were
      even getting through InitInstance(). Thus, the thread would keep executing, but all its 
      variables were gone, so it crashed. I added a OPEVENT_KILL message to the operations and send
      the kill message to the thread instead of deleting the memory of the thread. The thread deletes
      its own memory when it call AfxEndThread() after it gets the OPEVENT_KILL message.
    - Added a "Ready" string to the PortMgrDlg group boxes so the status bar does not go blank when the
      mouse is over the bulk of the applications main window.

	*******************************
	BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0006
	*******************************
	9/20/04
	Added code to support RegScrub drop down box and removal of static id's
	Added status for the Reg Clean menu item

*******************************
RELEASE_STMFGTOOL_1.1.7.139
*******************************
	9/14/2004
	- Fixed problem in mscdevlib code-base where the formatter was asserting on a blank media.
      Problem had to do with DeviceIoControl(IOCTL_VOLUME_GET_VOLUME_DISK_EXTENTS) failing. This
	  call is used to get the PhysicalDrive number that is used during formatting. Also, there
      was some code trying to get the updater's resource to get a error message. Since our updater
      does not use a resource object, the code was asserting. This is fixed.

*******************************
RELEASE_STMFGTOOL_1.1.6.139
*******************************
	9/13/2004
	- Fixed CreteScsi() in mscdevlib.lib so that it works in XP_SP2

*******************************
BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0005
*******************************
	branch merged br_localized_mfg_tool_1.548.0.139_main_dev_0005
	9/10/2004
	
	- Fixed configuration problem where assigning usb ports to port dialogs would assert.
      The problem was that the configuration manager now regularly deletes and creates the
      player profile. The CPortMgrDlg classes member varaible pointers were not getting updated
      by the configuration manager so the program asserted when trying to access the profile with
      a  stale pointer. Now, if the CPortMgrDlgs are windows, the configuration manager sends a 
      message to them telling them to refresh their profile pointers.

	- Ask for only READ access when opeing the USBSTOR key to get the REMOVABLE MEDIA information.
      This fixes the permissions problem when scrubbing the registry.

    - Some work done on the User's Manual. Not finished yet.

*******************************
RELEASE_STMFGTOOL_1.1.5.139
*******************************

*******************************
BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0003
*******************************
	branch merged br_localized_mfg_tool_1.548.0.139_main_dev_0003
	9/1/2004
	
	- Fixed Profile description valid chars and min/max issues
	- Fixed Volume label zero length allowed and valid chars issues
	- Fixed Dirpath valid chars description	
	- Added temporary code to debug intermittent VOL_ERROR message
	- Removed clean registry links from general page

*******************************
BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_0004
*******************************
	branch merged br_localized_mfg_tool_1.548.0.139_main_dev_0004
	8/30/2004
	
	- Moved VERSION INFO structure from StMfgTool.rc to res\StMfgTool.rc so it won't get
      destroyed by the resource editor every time we edit the program resources.
	- 1st round of profile-editor bugs - fixed. Any new items should be entered into ClearQuest.
	- Added code to limit application to a single instance.


*******************************
RELEASE_STMFGTOOL_1.1.4.139
*******************************

*******************************
*******************************
	branch merged br_localized_main_dev_0021
	08/23/04
	Over-installer changes
	Add link for the 'User's Manual' in the start menu

*******************************
BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_DEV_0002
*******************************
	branch merged: br_localized_mfg_tool_1.548.0.139_main_dev_0002
	08/23/2004

	Added code to support RegScrubDlg

*******************************
BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_DEV_0001
*******************************
	branch merged: br_localized_mfg_tool_1.548.0.139_main_dev_0001
	08/23/2004

	STMP: 5053	- Implemented code to allow the user to create and edit profiles and operations from the 
                  configuration page of the profile manager. 
	STMP: 5055	- Implemented code to allow the user to create and edit profiles and operations from the 
                  configuration page of the profile manager. 

*******************************
*******************************
	branch merged: br_localized_main_dev_0013
	07/27/2004

		Stmp00005176 & Stmp00005177 are fixed: On WinXP & Win2K, IOCTL_DISK_SET_DRIVE_LAYOUT is called to format the MBR, 
		unfortunately on WinXP this IOCTL doesn't inform all the system components about the new MBR as such chkdsk 
		and read capacity test tools don't see the change and report file system to be RAW. This problem is not found on Win2K. 
		This is fixed by calling IOCTL_DISK_DELETE_DRIVE_LAYOUT before calling IOCTL_DISK_SET_DRIVE_LAYOUT. This change has fixed 
		Stmp00005176 and Stmp00005177. On WinXP, IOCTL_DISK_DELETE_DRIVE_LAYOUT is returning FALSE but the state of the file 
		system is being updated and chkdsk and read capacity tools are returning correct results.

		Stmp00005166 is fixed: On WinMe and Win98se, the font, "Microsoft San Serif", is not present and 
		updater application is using this font as the default font. This is resulting in bigger fonts on WinMe/98se 
		and as such the size of the dialog windows is going off the screen on low resolutions. This problem is fixed by 
		specifying MS Shell Dlg (8) as the default font for all the dialog resources. Microsoft documentation suggests so.

	branch merged: br_localized_main_dev_0014
	07/02/2004

		Stmp00005169 is fixed. Systems requiring multiple retries to generate the device list after enumeration
		would fail to generate the list.  The app would attempt to lock a mutex protecting the list without first
		releasing it.

*******************************
RELEASE_STMFGTOOL_1.1.3.139
*******************************
BR_LOCALIZED_MFG_TOOL_1.548.0.139_MAIN_DEV_0000
BR_SDK2.410_MAIN_LOCALIZATION_MFGTOOL_MAIN
07/26/2004

STMP: 5021	- Brought MSCDEVLIB.LIB and DLL code up to version 1.548.0.139 level
			- Brought example profile firmware up to 2.421 and 2.511 so they will work with FAT32
			- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
			- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
				If an UPDATE or FORMAT operation is performed and the firmware SDK version is prior to
                SDK2.421 (3410) or SDK2.511 (3500), the player.ini file MUST contain a 
				FILE_SYSTEM=FAT16 entry in the [UPDATE_SECTION].
				This is because the UPDATE and FORMAT operations will automatically use FAT32 ( which is ONLY
				compatible with the later firmware) if FAT16 is not specified.
			- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
			- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
STMP: 5024	- A volume label can now be specified by adding the following entry to the [PROFILE] section
              of the player.ini file:
			  VOLUME_LABEL=***********
			  * Note that the volume label is restricted to 11 characters!

STMP: 5094	- changed the status icon on the profile page in the configuration manager to be the generic
              information icon instead of the SigmaTel icon.

	*******************************
	Label: RELEASE_1.547.0.139, BR_LOCLAIZED_0009
	*******************************
	branch merged br_localized_main_dev_0010
	07/02/2004

		Stmp00005079 is fixed. Quick download would most of the times result in unstable player or usbmsc. 
		This is fixed by first properly updating the system drive sizes in the upgrade table as we do for full download.

	*******************************
	Label: RELEASE_1.547.0.139, BR_LOCLAIZED_0009
	*******************************
	06/08/2004

	Creating release with BR_LOCALIZED_0008 changes.
	Corrections to device list generation for Win98 Eject application

	*******************************
	Label: RELEASE_1.546.0.139, BR_LOCALIZED_0008
	*******************************
	06/03/04

	Fixed Win98 Eject app not recognizing devices connected to USB2.0

	*******************************
	Label: RELEASE_1.545.0.139, BR_LOCALIZED__0007, BR_LOCALIZED__0006, BR_LOCALIZED__0005
	*******************************
	05/04/04
	
	Change to SUBLANG_DEFAULT in English resources for Win98 Eject application.
	Language corrections to Korean and Chinese resources
	Language corrections to French, Japanese resources

	*******************************
	Label: RELEASE_1.544.0.139, 
	*******************************
			BR_LOCALIZED_0004, BR_LOCALIZED_0003, BR_LOCALIZED_0002, BR_LOCALIZED_0001, BR_LOCALIZED_0000,
			BR_SDK2.410_LOCAL_DEV_0042, BR_SDK2.410_LOCAL_DEV_0029
	03/12/04
	Fixes:
	
	Stmp00004669 - New MS Code based Stmp3rec driver fails to work properly with old 2.3 host updater.
		Added SGTL specific IOCTLs to MS based recovery driver to support older firmware updaters using the IOCTLs
		instead of vendor specific SCSI commands.
	Stmp00004696 -  String resources for Simplified Chinese and Traditional Chinese switched in Win98 Eject application.


	Stmp00004607 - Updater sends DDI_ALLOCATE_MEDIA_TABLE command that takes a while to return from the firmware. Especially
	for a Multi-NAND firmware of capacity 1024 MB, during that time if user tries to close the app by double clicking the
	top-left corner icon then system assumes that the app is not responding and displays error box “The program is not responding…”
	Updater is working in a single thread and cannot call IOCTL_SCSI_PASS_THROUGH asynchronously hence there was no way but to wait
	endlessly for the reply. Solution: Introduced a thread for sending commands to the firmware. So each command will be sent in
	its own thread and after the reply from the firmware or 2 minutes timeout the thread function will be closed. By introducing
	this thread, application’s main thread loop is free to process other events like user clicks, etc. 

	Changes:

	Added FAT32 support.

		Sizes <= 4 MB   ==> FAT12
		Sizes <= 32 MB  ==> FAT16
		All other Sizes ==> FAT32

	There was a timer placed in the updater that will not let the updater from running after 29th February 2004. This is removed
	and the next release should go for a formal testing before releasing to customers. 

	For languages that are not supported updater application was not displaying the title and about box strings. This is fixed.

	Modified the download process to first write all sectors of all system drives then do read-back verify. Earlier, updater was
	writing a bunch of sectors at a time for a system drive and doing read-back verify after each write command.

	Fixed a bug in formatting code that fails to update the signature code for FATAREA1 and FATAREA2 sectors for nands less that 128 MB.

	On a clean NAND IOCTL_DISK_SET_DRIVE_LAYOUT would blue screen on Win2k operating system. The reason being incompatible CHS parameters passed to this IOCTL. This is fixed.

	An undocumented command line option /fat16 is added to force the updater application to format the media using FAT16 format.

	*******************************
	BR_LOCALIZED_0004
	Branch merged br_localized_main_dev_0004

	Fixes:

	1. On a clean NAND IOCTL_DISK_SET_DRIVE_LAYOUT would blue screen on Win2k operating system. The reason being incompatible CHS parameters passed to this IOCTL. This is fixed.
	2. An undocumented command line option /fat16 is added to force the updater application to format the media using FAT16 format.

	*******************************
	BR_LOCALIZED_0003
	Branch merged br_localized_main_dev_0003

	Fixes:

	Stmp00004669 - New MS Code based Stmp3rec driver fails to work properly with old 2.3 host updater.
		Added SGTL specific IOCTLs to MS based recovery driver to support older firmware updaters using the IOCTLs
		instead of vendor specific SCSI commands.

	*******************************
	BR_LOCALIZED_0002
	Branch merged: br_localized_main_dev_0000

	Added FAT32 support.

	Sizes <= 4 MB   ==> FAT12
	Sizes <= 32 MB  ==> FAT16
	All other Sizes ==> FAT32

	*******************************
	BR_LOCALIZED_0001
	Branch merged: br_localized_main_dev_0002

	Fixes:
	Stmp00004696 -  String resources for Simplified Chinese and Traditional Chinese switched in Win98 Eject application.

	*******************************
	BR_LOCALIZED_0000
	Branch merged: br_localized_main_dev_0001

	Updater sends DDI_ALLOCATE_MEDIA_TABLE command that takes a while to return from the firmware. Especially for a Multi-NAND firmware of capacity 1024 MB, during that time if user tries to close the app by double clicking the top-left corner icon then system assumes that the app is not responding and displays error box “The program is not responding…” 
	Updater is working in a single thread and cannot call IOCTL_SCSI_PASS_THROUGH asynchronously hence there was no way but to wait endlessly for the reply. 
	Solution: Introduced a thread for sending commands to the firmware. So each command will be sent in its own thread and after the reply from the firmware or 2 minutes timeout the thread function will be closed. By introducing this thread, application’s main thread loop is free to process other events like user clicks, etc. 

	Stmp00004607 is fixed with this merge.
		
	There was a timer placed in the updater that will not let the updater from running after 29th February 2004. This is removed and the next release should go for a formal testing before releasing to customers. 

	*******************************
	BR_SDK2.410_LOCAL_DEV_0042

	For languages that are not supported updater application was not displaying the title and about box strings. This is fixed.

	*******************************
	BR_SDK2.410_MAIN_DEV_0029

	Modified the download process to first write all sectors of all system drives then do read-back verify. Earlier, updater was writing a bunch of sectors at a time for a system drive and doing read-back verify after each write command.

	Fixed a bug in formatting code that fails to update the signature code for FATAREA1 and FATAREA2 sectors for nands less that 128 MB.

	*******************************
	RELEASE_1.543.0.139
	*******************************
	Include branch BR_SDK2.410_LOCAL_DEV_0041, BR_SDK2.410_MAIN_DEV_0028, BR_SDK2.410_MAIN_DEV_0025, BR_SDK2.410_MAIN_DEV_0024, BR_SDK2.410_MAIN_DEV_0023

	Fixed Stmp00004435. 16x16 size icon was not getting displayed in the dialog’s caption, instead 32x32 size icon was appearing in that place in shrink form.

	Updater was calling LoadIcon() API that will always load the icon with standard size 32x32, hence for 16x16 size icons the system was shrinking 32x32 icon to fit into 16x16 size (in pixels). This is fixed by calling LoadImage() API in place of LoadIcon(), that will allow any size icon to be loaded.  Vendor icon should always load with size 32x32 and updater icon with 16x16 sizes to fix this problem.

	This merge will fix the application hanging on firmware download while refreshing drives for 3500 devices on 
	windows 2000/XP operating systems.

	To fix the hang during refreshing drives we are now calling IOCTL_DISK_SET_DRIVE_LAYOUT after writing the MBR 
	but before writing PBS. This solution has been found to be refreshing drives correctly on both operating systems 
	without having to disable and enable the device programmatically.

	For Win9x/Me, lock is now obtained on physical volume instead of logical volume. 
	With this change device refresh after a full firmware download is no longer required.

	On WinXP, device refresh is anyway not required. 

	For Win2k we reduced the process of device refresh from disabling and re-enabling to 
	simply calling SetupDiChangeState API to indicate a change in the device properties 
	to refresh the FAT in the explorer views.

	Updater application will try to restore the volume label stored on the media in PBS. It will read the PBS and 
	will save the volume label before doing a media erase, in doing so updater application will stop further execution 
	if it fails to read the volume label. This is incorrect as there may be bad blocks on the NAND that can fail 
	Read-Sector command and by allowing to continue may fix some of these errors on the media. So, in this merge, 
	we are tolerating the failure to read the volume label before a media erase.

	To fix Stmp00004271, we are temporarily introducing a hack that will send 0x32 vendor-specific command to the device before doing a device node refresh by calling windows API to disable and enable the device. 
	This solution is temporary and should only be released with firmware that can handle 0x32 vendor-specific command.


	*******************************
	BR_SDK2.410_LOCAL_DEV_0040
	- Added thumb drive chipID to Win98 USBMSC support
	- Prevent overwrite of existing recovery mode driver on install

	*******************************
	BR_SDK2.410_LOCAL_DEV_0039
	- Added 3500 to supported chip IDs in Win98 USBMSC driver

	*******************************
	BR_SDK2.410_LOCAL_DEV_0038
	- Corrected code page of Traditional Chinese license agreement file.
	- Moved Sigmatel license files to common folder

*******************************
RELEASE_STMFGTOOL_1.1.2.139
*******************************
BR_SDK2.410_MAIN_LOCALIZATION_MFGTOOL_MAIN_0023
07/23/2004
	- Added operation text field to port mgr dlg to display current operation
	- Added version field to port mgr dlg to display version when updating(stmp5136)
	- Added static firmware loads to load into ram during recovery mode.(stmp5080)
		- firmware reports 066f/0000 serial no. 0000000000000000
		- this will make all the devices on teh manufacturing line look the same
		- this will prevent the os form enumerating a new part for each device
		- this will prevent the os from cluttering the registry
		- this will speed up the manufacturing line because os will not have to enumerate
		- added scsi command to return the actual serial number to be used for manufacturing statistics
		- modified installer to copy mfgmsc34.sb and mfgmsc35.sb to the install directory
		- can be turned off with "use static-id firmware" on the config/general page
		- default is "use static load"
	- Added ability to migrate from one profile to another (stmp5093)
		- this can be turned off with "restrict operations to profile devices"
		- default is restricted
	- Fixed recource file so that it picks up changes to version.h (stmp5097)

